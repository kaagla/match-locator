(this["webpackJsonpmatch-locator"]=this["webpackJsonpmatch-locator"]||[]).push([[0],{29:function(e,t,a){e.exports=a(77)},34:function(e,t,a){},52:function(e,t,a){},53:function(e,t,a){},59:function(e,t,a){},60:function(e,t,a){},61:function(e,t,a){},62:function(e,t,a){},63:function(e,t,a){},64:function(e,t,a){},65:function(e,t,a){},66:function(e,t,a){},67:function(e,t,a){},68:function(e,t,a){},69:function(e,t,a){},70:function(e,t,a){},71:function(e,t,a){},72:function(e,t,a){},73:function(e,t,a){},74:function(e,t,a){},75:function(e,t,a){},76:function(e,t,a){},77:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),c=a(12),r=a.n(c),i=(a(34),a(17)),s=a(1),o=a(10),m=a.n(o),u=(a(52),a(80)),d=a(81),p=a(79),h=a(82),E=a(83),f=a(5),v=a.n(f);a(53);function g(e){return l.a.createElement("div",{className:"map-container"},l.a.createElement("link",{rel:"stylesheet",href:"//cdnjs.cloudflare.com/ajax/libs/leaflet/1.3.1/leaflet.css"}),l.a.createElement(u.a,{center:[e.mapCenter.lat,e.mapCenter.lon],zoom:function(){var t;return t="Suomi"!==e.mapCenter.city?11:6,window.innerWidth<=600?t-1:t}(),attributionControl:!0,zoomControl:!1,doubleClickZoom:!0,scrollWheelZoom:!0,dragging:!0,animate:!0,easeLinearity:.35},l.a.createElement(d.a,{url:"http://{s}.tile.osm.org/{z}/{x}/{y}.png"}),e.locations.map((function(t){return l.a.createElement(p.a,{key:t._id,position:[t.lat,t.lon],opacity:.9,onclick:function(){return e.handleLocationPopup(t)}},l.a.createElement(h.a,null," "))})),l.a.createElement(E.a,{position:"bottomright"})))}delete v.a.Icon.Default.prototype._getIconUrl,v.a.Icon.Default.mergeOptions({iconRetinaUrl:a(54),iconUrl:a(55),shadowUrl:a(56)});a(59);function N(e){var t={info:"INFO",search:"HAKU",eye:"KOHDISTUS",map:"KARTTA","list-ul":"OTTELUT"};return l.a.createElement("div",{className:"navi-container"},l.a.createElement("div",{className:"navi-box"},l.a.createElement("ul",null,Object.keys(t).map((function(a){return 0===e.numMatches&&"list-ul"===a?l.a.createElement("li",{key:a},l.a.createElement("span",{className:"navi-item-disabled"},l.a.createElement("i",{className:"fas fa-"+a}),l.a.createElement("span",{className:"navi-definition"},t[a]))):l.a.createElement("li",{key:a,onClick:function(){return e.handleNaviChange(a)}},l.a.createElement("span",{className:e.naviSelected===a?"navi-item-selected":"navi-item"},l.a.createElement("i",{className:"fas fa-"+a}),l.a.createElement("span",{className:"navi-definition"},t[a])))})))))}a(60);function b(e){return l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"container-box"},l.a.createElement("div",{className:"close-btn",onClick:function(){return e.handleNaviChange("map")}},"X"),l.a.createElement("div",{className:"info-container"},l.a.createElement("div",null,l.a.createElement("h3",null,"miss\xe4 pelaa?")),l.a.createElement("div",null,'"Jalkapallo-ottelut helposti kartalle."'),l.a.createElement("div",null,"Ottelu-, lokaatio- ja sarjatilannetiedot on ker\xe4tty Suomen Palloliiton sivuilta ",l.a.createElement("a",{href:"https://www.palloliitto.fi",target:"_blank"},"(www.palloliitto.fi)"),"."),l.a.createElement("div",{className:"info-container--details"},e.DBinfo.updated?l.a.createElement("span",null,"Ottelutietokanta p\xe4ivitetty: ",function(e){var t=e.split("-")[0],a=parseInt(e.split("-")[1]);return parseInt(e.split("-")[2])+"."+a+"."+t}(e.DBinfo.updated)):l.a.createElement("span",null),l.a.createElement("span",null,"Sovelluksen l\xe4hdekoodi: ",l.a.createElement("a",{href:"https://www.github.com/kaagla/match-locator",target:"_blank"},l.a.createElement("i",{className:"fab fa-github"})))))))}var w=a(7);a(61);function O(e){return l.a.createElement("div",{className:"icon-component"},l.a.createElement("div",null,l.a.createElement("i",{className:"fas fa-"+e.icon})),l.a.createElement("div",{className:"icon-component--definition"},e.definition))}a(62);function y(e){var t=(new Date).toJSON().split("T")[0],a=Object(n.useState)(!1),c=Object(s.a)(a,2),r=c[0],i=c[1],o=Object(n.useState)(""),m=Object(s.a)(o,2),u=m[0];m[1];function d(t){var a=new Date(t).getTime(),n=new Date(e.dateFrom).getTime(),l=new Date(e.dateTo).getTime();a<n||n!==l?(e.setDateFrom(t),e.setDateTo(t)):n===l&&e.setDateTo(t)}function p(e,t){return parseInt(e.split("-")[1])!==parseInt(t)}function h(e){var t=e.split("-")[0],a=parseInt(e.split("-")[1]);return parseInt(e.split("-")[2])+"."+a+"."+t}return Object(n.useEffect)((function(){document.getElementById(e.dateTo.split("-").slice(0,2).join("-")).scrollIntoView({behavior:"auto",block:"center"})}),[]),Object(n.useEffect)((function(){document.getElementById(e.dateTo.split("-").slice(0,2).join("-")).scrollIntoView({behavior:"smooth",block:"center"})}),[e.dateTo]),l.a.createElement("div",{className:"calendar-container"},l.a.createElement("div",{className:"calendar-component"},l.a.createElement("div",{className:"calendar-component--display",onClick:function(){return i(!r)}},e.dateFrom===e.dateTo?l.a.createElement("div",null,h(e.dateFrom)):l.a.createElement("div",null,e.dateFrom.split("-")[0]===e.dateTo.split("-")[0]?l.a.createElement("span",null,function(e){var t=parseInt(e.split("-")[1]);return parseInt(e.split("-")[2])+"."+t+"."}(e.dateFrom)):l.a.createElement("span",null,h(e.dateFrom)),l.a.createElement("span",null," \u2192 "),l.a.createElement("span",null,h(e.dateTo)))),l.a.createElement("div",{className:"calendar-component--table-headings"},l.a.createElement("table",null,l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"MA"),l.a.createElement("th",null,"TI"),l.a.createElement("th",null,"KE"),l.a.createElement("th",null,"TO"),l.a.createElement("th",null,"PE"),l.a.createElement("th",null,"LA"),l.a.createElement("th",null,"SU"))))),l.a.createElement("div",{className:"calendar-component--tables"},function(e){var t=[];return e.map((function(e){[1,2,3,4,5,6,7,8,9,10,11,12].map((function(a){var n={year:e,month:a<=9?"0"+a:a.toString()};n.monthDays=function(e,t){var a=e-1,n=t,l=new Date(n,a+1,0).getDate(),c=-(new Date(n,a,1).getDay()-2);0===new Date(n,a,1).getDay()&&(c=-5);for(var r=l+(7-new Date(n,a,l).getDay()),i=[],s=c;s<=r;s++){var o=new Date(n,a,s),m=o.getDate();m=m<=9?"0"+m:m;o.getDay();var u=o.getMonth()+1;u=u<=9?"0"+u:u;var d=o.getFullYear();i.push({date:d+"-"+u+"-"+m})}for(var p=[],h=0;h<i.length/7;h++)p.push(i.slice(7*h,7*(h+1)));return p}(a,e),t.push(n)}))})),t}([2019,2020,2021]).map((function(t){return l.a.createElement("div",{className:"calendar-component--month",key:t.year+"-"+t.month,id:t.year+"-"+t.month},l.a.createElement("h5",null,{"01":"tammikuu","02":"helmikuu","03":"maaliskuu","04":"huhtikuu","05":"toukokuu","06":"kes\xe4kuu","07":"hein\xe4kuu","08":"elokuu","09":"syyskuu",10:"lokakuu",11:"marraskuu",12:"joulukuu"}[t.month]+" "+t.year),l.a.createElement("table",null,l.a.createElement("tbody",null,t.monthDays.map((function(a,n){return l.a.createElement("tr",{key:n},a.map((function(a){return function(t){if(null===e.dateTo){if(t===e.dateFrom)return!0}else if(t>=e.dateFrom&&t<=e.dateTo)return!0;return!1}(a.date)&&!p(a.date,t.month)?a.date===e.dateFrom||a.date===e.dateTo?l.a.createElement("td",{key:a.date,className:"calendar-component--item-selected",onClick:function(){return d(a.date)}},a.date.split("-")[2]):l.a.createElement("td",{key:a.date,className:"calendar-component--item-selected-range",onClick:function(){return d(a.date)}},a.date.split("-")[2]):p(a.date,t.month)?function(e,t){return parseInt(e.split("-")[0])!==parseInt(t)}(a.date,t.year)?l.a.createElement("td",{key:a.date}):l.a.createElement("td",{key:a.date,className:"calendar-component--item-difmonth",onClick:function(){return d(a.date)}},a.date.split("-")[2]):l.a.createElement("td",{key:a.date,className:"calendar-component--item",onClick:function(){return d(a.date)}},a.date.split("-")[2])})))})))))}))),l.a.createElement("div",{className:"calendar-component--shortcut"},l.a.createElement("form",null,l.a.createElement("label",null,l.a.createElement("select",{value:u,onChange:function(a){return function(a){if("today"===a&&(e.setDateFrom(t),e.setDateTo(t)),"this-week"===a){var n=new Date;e.setDateFrom(t),0!==n.getDay()?e.setDateTo(new Date(n.setDate(n.getDate()+(7-(new Date).getDay()))).toJSON().split("T")[0]):e.setDateTo(t)}if("next-week"===a){var l=new Date((new Date).setDate((new Date).getDate()+(8-(new Date).getDay()))),c=new Date(l);c.setDate(c.getDate()+6),e.setDateFrom(l.toJSON().split("T")[0]),e.setDateTo(c.toJSON().split("T")[0])}if("this-month"===a){e.setDateFrom(t);var r=new Date(t),i=new Date(r.setDate(32));i=new Date(r.setDate(0)).toJSON().split("T")[0],e.setDateTo(i)}if("next-month"===a){var s=new Date((new Date).setDate(32)).toJSON().split("T")[0],o=new Date(new Date((new Date).setDate(64)).setDate(0)).toJSON().split("T")[0];e.setDateFrom(s),e.setDateTo(o)}if("this-year"===a){var m=new Date((new Date).getFullYear(),11,32).toJSON().split("T")[0];e.setDateFrom(t),e.setDateTo(m)}}(a.target.value)}},l.a.createElement("option",{value:""},"Ajanjakson pikavalinta"),l.a.createElement("option",{value:"today"},"T\xe4n\xe4\xe4n"),l.a.createElement("option",{value:"this-week"},"Tulevat t\xe4ll\xe4 viikolla"),l.a.createElement("option",{value:"next-week"},"Ensi viikolla"),l.a.createElement("option",{value:"this-month"},"Tulevat t\xe4ss\xe4 kuussa"),l.a.createElement("option",{value:"next-month"},"Ensi kuussa"),l.a.createElement("option",{value:"this-year"},"Tulevat t\xe4n\xe4 vuonna")))))))}a(63);function S(e){return l.a.createElement("div",{className:"count-badge-component"},l.a.createElement("div",{className:"count-badge-component--item"},e.count))}a(64);function j(e){return l.a.createElement("div",{className:"search-input-component"},l.a.createElement("form",null,l.a.createElement("label",null,l.a.createElement("input",{className:"input-search",type:"search",value:e.searchText,placeholder:e.placeholder,onChange:function(t){return e.handleSearchTextChange(t.target.value)}}))))}a(65);function k(e){var t=Object(n.useState)(!1),a=Object(s.a)(t,2),c=a[0],r=a[1];return l.a.createElement("div",{className:"list-item-component"},l.a.createElement("div",{className:"list-item-component--header",onClick:function(){return r(!c)}},l.a.createElement("span",null,e.item.name),l.a.createElement("span",null,l.a.createElement("i",{className:c?"arrow-up":"arrow-down"}))),c?l.a.createElement("div",{className:"list-item-component--options"},l.a.createElement("div",null,l.a.createElement("div",null,"VALINNAT"),l.a.createElement("div",{className:"list-item-component--options-group"},l.a.createElement("span",{className:e.favourites.filter((function(t){return t.name===e.item.name})).length>0?"list-item-component--options-selected":"",onClick:function(){return e.handleSelection("favourites",e.item)}},l.a.createElement(O,{icon:"star",definition:"SUOSIKKI"})),l.a.createElement("span",{className:e.filters.filter((function(t){return t.name===e.item.name})).length>0?"list-item-component--options-selected":"",onClick:function(){return e.handleSelection("filters",e.item)}},l.a.createElement(O,{icon:"filter",definition:"SUODATIN"})))),l.a.createElement("div",null,l.a.createElement("div",null,"N\xc4YT\xc4"),l.a.createElement("div",{className:"list-item-component--options-group"},l.a.createElement("span",{onClick:function(){return e.applyQuickSearch(e.item)}},l.a.createElement(O,{icon:"list-ul",definition:"OTTELUT"})),["level","team"].includes(e.item.type)?l.a.createElement("span",{onClick:function(){return e.applyGetStandings(e.item)}},l.a.createElement(O,{icon:"trophy",definition:"SARJATILANNE"})):l.a.createElement("span",null)))):l.a.createElement("div",null))}a(66);function T(e){return l.a.createElement("div",{className:"list-component"},l.a.createElement("ul",null,e.items.map((function(t){return l.a.createElement("li",{key:t.name},l.a.createElement(k,{item:t,favourites:e.favourites,filters:e.filters,handleSelection:e.handleSelection,applyQuickSearch:e.applyQuickSearch,applyGetStandings:e.applyGetStandings}))}))))}a(67);function D(e){var t="Hakutulos: ";return 0===e.numMatches?t+="ei otteluita.":1===e.numMatches?t+="1 ottelu.":t+="".concat(e.numMatches," ottelua."),l.a.createElement("div",{className:"results-component"},l.a.createElement("span",null,e.isLoading?e.loadingText:t),l.a.createElement("span",{className:e.changesMade?"results-component--update-btn":"results-component--update-btn-hide",onClick:function(){return e.applySearch()}},"P\xc4IVIT\xc4 HAKUTULOKSET"))}a(68);function C(e){var t=(new Date).toJSON().split("T")[0],a=Object(n.useState)(t),c=Object(s.a)(a,2),r=c[0],i=c[1],o=Object(n.useState)(t),m=Object(s.a)(o,2),u=m[0],d=m[1],p=Object(n.useState)("calendar"),h=Object(s.a)(p,2),E=h[0],f=h[1],v=Object(n.useState)(""),g=Object(s.a)(v,2),N=g[0],b=g[1],k=Object(n.useState)((function(){if(JSON.parse(window.localStorage.getItem("filters")))return JSON.parse(window.localStorage.getItem("filters"));return[]})),C=Object(s.a)(k,2),I=C[0],_=C[1],x=Object(n.useState)((function(){if(JSON.parse(window.localStorage.getItem("favourites")))return JSON.parse(window.localStorage.getItem("favourites"));return[]})),A=Object(s.a)(x,2),J=A[0],L=A[1],F=Object(n.useState)(!1),M=Object(s.a)(F,2),U=M[0],K=M[1],P=Object(n.useState)(20),G=Object(s.a)(P,2),H=G[0],B=G[1],R=[].concat(Object(w.a)(e.cities),Object(w.a)(e.levels),Object(w.a)(e.teams));function Q(e,t){if("favourites"===e)if(0===J.filter((function(e){return e.name===t.name})).length){var a=Object(w.a)(J);a.push(t),L(a),window.localStorage.setItem("favourites",JSON.stringify(a))}else{var n=Object(w.a)(J).filter((function(e){return e.name!==t.name}));L(n),window.localStorage.setItem("favourites",JSON.stringify(n))}if("filters"===e)if(0===I.filter((function(e){return e.name===t.name})).length){var l=Object(w.a)(I);l.push(t),_(l),window.localStorage.setItem("filters",JSON.stringify(l))}else{var c=Object(w.a)(I).filter((function(e){return e.name!==t.name}));_(c),window.localStorage.setItem("filters",JSON.stringify(c))}}function X(t){e.getMatches("",[t]),K(!0),e.handleNaviChange("list-ul")}function Y(t){e.getStandings(t),e.handleNaviChange("standings")}return Object(n.useEffect)((function(){K(!0)}),[u,r,I]),l.a.createElement("div",{className:"search"===e.naviSelected?"container":"container not-visible"},l.a.createElement("div",{className:"container-box"},l.a.createElement("div",{className:"close-btn",onClick:function(){return e.handleNaviChange("map")}},"X"),l.a.createElement("div",{className:"search-container"},""!==e.errorText?l.a.createElement("div",{className:"error-info"},e.errorText):l.a.createElement("span",null),l.a.createElement("div",{className:"search-container--results"},l.a.createElement(D,{changesMade:U,numMatches:e.matches.length,applySearch:function(){e.getMatches("".concat(r,",").concat(u),I),K(!1)},isLoading:e.isLoading,loadingText:e.loadingText})),l.a.createElement("div",{className:"search-container--menu"},l.a.createElement("div",{className:"calendar"===E?"search-container--menu-item-selected":"search-container--menu-item",onClick:function(){return f("calendar")}},l.a.createElement(O,{icon:"calendar",definition:"AJANJAKSO"})),l.a.createElement("div",{className:"search"===E?"search-container--menu-item-selected":"search-container--menu-item",onClick:function(){return f("search")}},l.a.createElement(O,{icon:"search",definition:"ETSI"})),l.a.createElement("div",{className:"filter"===E?"search-container--menu-item-selected":"search-container--menu-item",onClick:function(){return f("filter")}},l.a.createElement(O,{icon:"filter",definition:"SUODATTIMET"}),l.a.createElement("div",{className:"search-container--menu-item-count"},l.a.createElement(S,{count:I.length}))),l.a.createElement("div",{className:"star"===E?"search-container--menu-item-selected":"search-container--menu-item",onClick:function(){return f("star")}},l.a.createElement(O,{icon:"star",definition:"SUOSIKIT"}),l.a.createElement("div",{className:"search-container--menu-item-count"},l.a.createElement(S,{count:J.length})))),l.a.createElement("div",{className:"search-container--item-group"},l.a.createElement("div",{className:"calendar"===E?"":"not-visible"},l.a.createElement(y,{dateFrom:r,setDateFrom:i,dateTo:u,setDateTo:d})),l.a.createElement("div",{className:"search"===E?"search-container--search":"not-visible"},l.a.createElement("div",{className:"search-container--search-input"},l.a.createElement(j,{searchText:N,setSearchText:b,handleSearchTextChange:function(e){B(20),b(e)},placeholder:"etsi sarjaa, joukkuetta, kaupunkia..."})),l.a.createElement("div",{className:"search-container--list-component"},l.a.createElement(T,{items:""===N?[]:R.filter((function(e){return N.split(" ").every((function(t){return e.name.toLowerCase().includes(t.toLowerCase())}))})).slice(0,H),filters:I,favourites:J,handleSelection:Q,applyQuickSearch:X,applyGetStandings:Y}),""!==N&&R.filter((function(e){return N.split(" ").every((function(t){return e.name.toLowerCase().includes(t.toLowerCase())}))})).length>H?l.a.createElement("div",{className:"search-container--list-component--more-items",onClick:function(){B(1/0)}},l.a.createElement("span",null,"N\xc4YT\xc4 LIS\xc4\xc4"),l.a.createElement("span",{className:"arrow-down"})):l.a.createElement("span",null))),l.a.createElement("div",{className:"filter"===E?"":"not-visible"},I.length>0?l.a.createElement(T,{items:I,filters:I,favourites:J,handleSelection:Q,applyQuickSearch:X,applyGetStandings:Y}):l.a.createElement("div",null)),l.a.createElement("div",{className:"star"===E?"":"not-visible"},J.length>0?l.a.createElement(T,{items:J,filters:I,favourites:J,handleSelection:Q,applyQuickSearch:X,applyGetStandings:Y}):l.a.createElement("div",null))))))}a(69),a(70),a(71),a(72);function I(e){var t=Object(n.useState)("points"),a=Object(s.a)(t,2),c=a[0],r=a[1],i=Object(n.useState)(!0),o=Object(s.a)(i,2),m=o[0],u=o[1],d=e.standings,p=e.selectedGroup,h={played:"O",wins:"V",draws:"T",losses:"H",scored:"TM",conceded:"PM",difference:"+/-",points:"P"};function E(e){c===e?u(!m):(r(e),u(!0))}return l.a.createElement("div",{className:"standingstable-component"},function(){var e=d.filter((function(e){return e.name===p})),t={name:p,standings:[]};return e[0].standings.sort((function(e,t){return m?t[c]-e[c]:e[c]-t[c]})).map((function(e){t.standings.push(e)})),[t]}().map((function(e){return l.a.createElement("div",{key:e.name,className:"group-component"},l.a.createElement("table",{className:"standings-group-table"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null),l.a.createElement("th",null),Object.keys(h).map((function(e){return e===c?l.a.createElement("th",{onClick:function(){return E(e)}},l.a.createElement("span",null,h[e]," "),m?l.a.createElement("span",null,"\u2193"):l.a.createElement("span",null,"\u2191")):l.a.createElement("th",{onClick:function(){return E(e)}},l.a.createElement("span",null,h[e]))})))),l.a.createElement("tbody",null,e.standings.map((function(t){return l.a.createElement("tr",{key:t.name,name:t.name},l.a.createElement("td",null,e.standings.indexOf(t)+1,"."),l.a.createElement("td",{id:t.name},t.team),l.a.createElement("td",null,t.played),l.a.createElement("td",null,t.wins),l.a.createElement("td",null,t.draws),l.a.createElement("td",null,t.losses),l.a.createElement("td",null,t.scored),l.a.createElement("td",null,t.conceded),l.a.createElement("td",null,t.difference),l.a.createElement("td",null,t.points))})))))})))}function _(e){var t=Object(n.useState)(!1),a=Object(s.a)(t,2),c=a[0],r=a[1],i=Object(n.useState)([]),o=Object(s.a)(i,2),u=o[0],d=o[1],p=Object(n.useState)([]),h=Object(s.a)(p,2),E=h[0],f=h[1],v=Object(n.useState)(""),g=Object(s.a)(v,2),N=g[0],b=g[1],w=Object(n.useState)(!1),y=Object(s.a)(w,2),S=y[0],j=y[1];function k(e,t){if("-"===t.score)return"no-score";var a=parseInt(t.score.split(" ")[0].split("-")[0]),n=parseInt(t.score.split(" ")[0].split("-")[1]);return a===n?"draw":a-n>0?e===t.home_name?"win":"loss":e===t.away_name?"win":"loss"}function T(e){var t=parseInt(e.split(".")[2]),a=parseInt(e.split(".")[1])-1,n=parseInt(e.split(".")[0]);return new Date(t,a,n)>new Date}return Object(n.useEffect)((function(){!function(t,a,n,l){var c={},r=e.match,i=parseInt(r.date.split(".")[2]),s=parseInt(r.date.split(".")[1])-1,o=parseInt(r.date.split(".")[0])-1;c.dates="2019-01-01,"+new Date(i,s,o).toJSON().split("T")[0],c.team=[],c.team.push({name:e.match.home_name+" - "+e.match.level}),c.team.push({name:e.match.away_name+" - "+e.match.level}),m.a.post("/api/matches",c).then((function(e){0===e.data.length?b("Ei aiempia otteluita"):d(e.data)})).catch((function(e){console.log(e),b("Edellisi\xe4 otteluita ei saatavilla")}))}()}),[]),l.a.createElement("div",{className:"match-preview-component"},""!==N?l.a.createElement("div",null,"Edellisi\xe4 otteluita ei saatavilla"):l.a.createElement("div",{className:"match-preview-component-matchdiv"},l.a.createElement("div",{className:"match-preview-component-icon"},l.a.createElement("div",{className:0===u.length?"loader":""},l.a.createElement(O,{icon:"history",definition:"EDELLISET OTTELUT"}))),l.a.createElement("div",null,l.a.createElement("div",{className:"match-preview-component--last-matches"},l.a.createElement("div",{className:"match-preview-component--last-matches-home"},l.a.createElement("ul",null,u.filter((function(t){return t.home_name===e.match.home_name||t.away_name===e.match.home_name})).reverse().map((function(t){return l.a.createElement("li",{key:t.id,className:k(e.match.home_name,t)},l.a.createElement("div",{className:"match-preview-component--last-matches-teams"},l.a.createElement("span",{className:t.home_name===e.match.home_name?"selected":""},t.home_name),l.a.createElement("span",{className:t.away_name===e.match.home_name?"selected":""},t.away_name)),T(t.date)||"-"===t.score?l.a.createElement("div",{className:"match-preview-component--last-matches-date"},t.date):l.a.createElement("div",{className:"match-preview-component--last-matches-score"},l.a.createElement("span",null,t.score.split(" ")[0].split("-")[0]),l.a.createElement("span",null,t.score.split(" ")[0].split("-")[1])))})))),l.a.createElement("div",{className:"match-preview-component--last-matches-away"},l.a.createElement("ul",null,u.filter((function(t){return t.home_name===e.match.away_name||t.away_name===e.match.away_name})).reverse().map((function(t){return l.a.createElement("li",{key:t.id,className:k(e.match.away_name,t)},l.a.createElement("div",{className:"match-preview-component--last-matches-teams"},l.a.createElement("span",{className:t.home_name===e.match.away_name?"selected":""},t.home_name),l.a.createElement("span",{className:t.away_name===e.match.away_name?"selected":""},t.away_name)),T(t.date)||"-"===t.score?l.a.createElement("div",{className:"match-preview-component--last-matches-date"},t.date):l.a.createElement("div",{className:"match-preview-component--last-matches-score"},l.a.createElement("span",null,t.score.split(" ")[0].split("-")[0]),l.a.createElement("span",null,t.score.split(" ")[0].split("-")[1])))}))))))),l.a.createElement("div",{className:"match-preview-component-icon",onClick:function(){return function(){if(!c&&!S){r(!0);var t={standings:{type:"team",name:e.match.home_name+" - "+e.match.level}};m.a.post("/api/standings",t).then((function(e){0===e.data.length?j("Sarjatilannetta ei saatavilla"):f(e.data)})).catch((function(e){console.log(e),r(!1),j("Sarjatilannetta ei saatavilla")}))}}()}},l.a.createElement("div",{className:0===E.length&&c?"loader":""},l.a.createElement(O,{icon:"trophy",definition:c||S?"SARJATILANNE":"N\xc4YT\xc4 SARJATILANNE"}))),S?l.a.createElement("div",null,"Sarjatilannetta ei saatavilla"):E.length>0?l.a.createElement(I,{standings:E,selectedGroup:E[0].name}):l.a.createElement("div",null))}function x(e){var t=Object(n.useState)(e.itemIsOpen),a=Object(s.a)(t,2),c=a[0],r=a[1],i=Object(n.useState)([]),o=Object(s.a)(i,2),m=o[0],u=o[1];function d(t){var a=e.matches.filter((function(e){return e.venue_name===t}))[0].city;return t.includes(a)?t:t+", "+a}return l.a.createElement("div",{className:"matchlist-component"},l.a.createElement("div",{className:"matchlist-component--header",onClick:function(){return r(!c)}},l.a.createElement("div",{className:"matchlist-component--header-name"},l.a.createElement("span",null,"venue_name"===e.groupbyItem?d(e.header):e.header),l.a.createElement("span",{className:"matchlist-component--header-count"},l.a.createElement(S,{count:e.matches.length}))),l.a.createElement("div",null,l.a.createElement("i",{className:c?"arrow-up":"arrow-down"}))),c?e.matches.map((function(t){return l.a.createElement("div",{key:t._id,className:"matchlist-component--match-details"},l.a.createElement("div",{className:"matchlist-component--match-details--whenwhere"},"date"!==e.groupbyItem?l.a.createElement("div",{className:"matchlist-component--match-details-date"},l.a.createElement("span",null,l.a.createElement("i",{className:"far fa-calendar"})),l.a.createElement("span",null,t.date)):l.a.createElement("span",null),l.a.createElement("div",{className:"matchlist-component--match-details-time"},l.a.createElement("span",null,l.a.createElement("i",{className:"far fa-clock"})),l.a.createElement("span",null,t.time)),"venue_name"!==e.groupbyItem?l.a.createElement("div",{className:"matchlist-component--match-details-venue"},l.a.createElement("span",null,l.a.createElement("i",{className:"fas fa-map-marker-alt"})),l.a.createElement("span",null,"city"===e.groupbyItem?t.venue_name:d(t.venue_name))):l.a.createElement("span",null),["city","venue_name"].includes(e.groupbyItem)?l.a.createElement("span",null):l.a.createElement("span",{className:"matchlist-component--match-details-city"})),l.a.createElement("div",{className:"matchlist-component--match-details--who"},"level"!==e.groupbyItem?l.a.createElement("div",{className:"matchlist-component--match-details-level"},l.a.createElement("span",null,l.a.createElement("i",{className:"fas fa-trophy"})),l.a.createElement("span",null,t.level)):l.a.createElement("span",null),l.a.createElement("div",{className:"matchlist-component--match-details-team-info"},l.a.createElement("div",{className:"matchlist-component--match-details-home"},l.a.createElement("span",null,t.home_name)),l.a.createElement("div",{className:"matchlist-component--match-details-score"},t.score),l.a.createElement("div",{className:"matchlist-component--match-details-away"},t.away_name))),function(e){var t=parseInt(e.split(".")[2]),a=parseInt(e.split(".")[1])-1,n=parseInt(e.split(".")[0]),l=new Date(t,a,n),c=(new Date).getFullYear(),r=(new Date).getMonth(),i=(new Date).getDate();return l>=new Date(c,r,i)}(t.date)?l.a.createElement("div",{className:"matchlist-component--match-preview"},l.a.createElement("div",{className:"matchlist-component--match-preview-btn",onClick:function(){return e=t._id,void(m.includes(e)?u(Object(w.a)(m).filter((function(t){return t!==e}))):u([].concat(Object(w.a)(m),[e])));var e}},l.a.createElement("span",null,"Ottelun asetelmat"),l.a.createElement("span",null,l.a.createElement("i",{className:m.includes(t._id)?"arrow-up":"arrow-down"}))),m.includes(t._id)?l.a.createElement("div",{className:"matchlist-component--match-preview-content"},l.a.createElement(_,{match:t})):l.a.createElement("span",null)):l.a.createElement("span",null),l.a.createElement("div",null))})):l.a.createElement("div",null))}function A(e){var t=Object(n.useState)("date"),a=Object(s.a)(t,2),c=a[0],r=a[1],i=new Set([]);return e.matches.map((function(e){i.add(e[c])})),l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"container-box"},l.a.createElement("div",{className:"close-btn",onClick:function(){return e.handleNaviChange("map")}},"X"),l.a.createElement("div",{className:"matchlist-container"},l.a.createElement("div",{className:"matchlist-container--grouping"},l.a.createElement("form",null,l.a.createElement("label",null," ","Ryhmittely: ",l.a.createElement("select",{value:c,onChange:function(e){return r(e.target.value)}},l.a.createElement("option",{value:"date"},"P\xe4iv\xe4m\xe4\xe4r\xe4"),l.a.createElement("option",{value:"level"},"Sarjataso"),l.a.createElement("option",{value:"city"},"Kaupunki"),l.a.createElement("option",{value:"venue_name"},"Kentt\xe4"))))),l.a.createElement("div",{className:"matchlist-container--matchlist-items"},("date"===c?Array.from(i):Array.from(i).sort()).map((function(t,a){return l.a.createElement(x,{key:t,header:t,groupbyItem:c,matches:e.matches.filter((function(e){return e[c]===t})),itemIsOpen:0===a})}))))))}a(73);function J(e){var t=Object(i.a)({},e.selectedLocation);return l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"container-box"},l.a.createElement("div",{className:"locationpopup-container"},l.a.createElement("div",{className:"close-btn",onClick:function(){return e.setShowPopup(!1)}},"X"),l.a.createElement("div",{className:"location-address-bar"},l.a.createElement("div",null,l.a.createElement("div",{className:"location-address"},t.address),l.a.createElement("div",{className:"location-address-city"},t.postalcode," ",t.city)),l.a.createElement("div",{className:"location-directions",onClick:function(){return window.open((e=t.lat,a=t.lon,"https://www.google.fi/maps/dir//".concat(e,",").concat(a,"/@").concat(e,",").concat(a,",11z")));var e,a}},l.a.createElement(O,{icon:"directions",definition:"REITTIOHJE"}))),function(){var t=new Set([]);return e.matches.map((function(e){t.add(e.venue_name)})),Array.from(t)}().map((function(t){return l.a.createElement(x,{key:t,header:t,groupbyItem:"venue_name",matches:e.matches.filter((function(e){return e.venue_name===t})),itemIsOpen:!0})})))))}a(74);function L(e){var t=Object(n.useState)(""),a=Object(s.a)(t,2),c=a[0],r=a[1],i=Object(w.a)(e.cities);return i.unshift({type:"city",name:"Suomi"}),l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"container-box"},l.a.createElement("div",{className:"close-btn",onClick:function(){return e.handleNaviChange("map")}},"X"),l.a.createElement("div",{className:"locate-components"},l.a.createElement("div",{className:"locate-components--search"},l.a.createElement(j,{searchText:c,handleSearchTextChange:function(e){r(e)},placeholder:"etsi kaupunki..."})),l.a.createElement("div",{className:"city-list"},l.a.createElement("ul",null,i.filter((function(e){return e.name.toLowerCase().includes(c.toLowerCase())})).map((function(t){return l.a.createElement("li",{key:t.name},l.a.createElement("span",{onClick:function(){return function(t){e.handleMapCenterChange(t),e.handleNaviChange("map")}(t)}},t.name))})))))))}a(75);function F(e){var t,a=Object(w.a)(e.standings);try{t=a[0].name}catch(u){t="Ongelma haettaessa sarjatilannetta"}var c=Object(n.useState)(t),r=Object(s.a)(c,2),i=r[0],o=r[1],m=a.map((function(e){return e.name}));return l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"container-box"},l.a.createElement("div",{className:"close-btn",onClick:function(){return e.handleNaviChange("search")}},"X"),l.a.createElement("div",{className:"standings-container"},l.a.createElement("h3",null,"Sarjatilanne: ",e.selectedStandings.name),m.length>1?l.a.createElement("form",null,l.a.createElement("select",{value:i,onChange:function(e){return o(e.target.value)}},m.map((function(e){return l.a.createElement("option",{value:e},e)})))):"Sarja"!==m[0]?l.a.createElement("span",null,m[0]):l.a.createElement("span",null),l.a.createElement("div",{className:"standings-container--table"},l.a.createElement(I,{standings:a,selectedGroup:i})))))}a(76);function M(e){return l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"container-box"},l.a.createElement("div",{className:"loading-container"},l.a.createElement("div",{className:"loader"},e.loadingText))))}var U=function(){var e=Object(n.useState)({city:"Suomi",lat:63,lon:25}),t=Object(s.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)(!1),o=Object(s.a)(r,2),u=o[0],d=o[1],p=Object(n.useState)({}),h=Object(s.a)(p,2),E=h[0],f=h[1],v=Object(n.useState)("search"),w=Object(s.a)(v,2),O=w[0],y=w[1],S=Object(n.useState)([]),j=Object(s.a)(S,2),k=j[0],T=j[1],D=Object(n.useState)([]),I=Object(s.a)(D,2),_=I[0],x=I[1],U=Object(n.useState)([]),K=Object(s.a)(U,2),P=K[0],G=K[1],H=Object(n.useState)([]),B=Object(s.a)(H,2),R=B[0],Q=B[1],X=Object(n.useState)([]),Y=Object(s.a)(X,2),V=Y[0],z=Y[1],W=Object(n.useState)([]),Z=Object(s.a)(W,2),$=Z[0],q=Z[1],ee=Object(n.useState)({}),te=Object(s.a)(ee,2),ae=te[0],ne=te[1],le=Object(n.useState)(!1),ce=Object(s.a)(le,2),re=ce[0],ie=ce[1],se=Object(n.useState)(""),oe=Object(s.a)(se,2),me=oe[0],ue=oe[1],de=Object(n.useState)(""),pe=Object(s.a)(de,2),he=pe[0],Ee=pe[1],fe=Object(n.useState)({}),ve=Object(s.a)(fe,2),ge=ve[0],Ne=ve[1];function be(e){y(e)}function we(e){m.a.get("api/"+e).then((function(t){"teams"===e&&T(t.data.filter((function(e){return e.name.charAt(0)>"9"}))),"cities"===e&&x(t.data.filter((function(e){return null!==e.name}))),"levels"===e&&G(t.data),"info"===e&&Ne(t.data[0])})).catch((function(e){return console.log(e)}))}return Object(n.useEffect)((function(){we("cities"),we("levels"),we("teams"),we("info")}),[]),l.a.createElement("div",{className:"App"},l.a.createElement(g,{mapCenter:a,locations:V,matches:R,handleLocationPopup:function(e){f(e),d(!0)}}),u?l.a.createElement(J,{setShowPopup:d,selectedLocation:E,matches:R.filter((function(e){return e.location_id===E._id}))}):l.a.createElement("div",null),l.a.createElement(N,{naviSelected:O,handleNaviChange:be,numMatches:R.length}),"eye"===O?l.a.createElement(L,{cities:_,handleMapCenterChange:function(e){if("Suomi"===e.name)c({city:"Suomi",lat:63,lon:25});else{var t={city:Object(i.a)({},e)};m.a.post("/api/citycoordinates",t).then((function(e){c(e.data[0])})).catch((function(e){return console.log(e)}))}},handleNaviChange:be}):l.a.createElement("div",null),l.a.createElement(C,{naviSelected:O,teams:k,cities:_,levels:P,matches:R,getMatches:function(e,t){ie(!0),ue("Haetaan otteluita...");var a={};""!==e&&(a.dates=e),t.length>0&&t.map((function(e){a[e.type]=[],a[e.type].push({name:e.name})})),m.a.post("/api/matches",a).then((function(e){Q(e.data);var t=new Set([]);return e.data.map((function(e){return t.add(e.location_id)})),Array.from(t)})).then((function(e){e.length>0?m.a.get("/api/locations?ids="+e.join(",")).then((function(e){z(e.data),console.log(e.data.length)})).catch((function(e){return console.log(e)})):(z([]),Q([]))})).then((function(){ie(!1),ue("")})).catch((function(e){console.log(e),ie(!1),ue(""),Ee("Ongelma ilmeni haettaessa otteluita."),setTimeout((function(){return Ee("")}),6e3)}))},handleNaviChange:be,getStandings:function(e){q([]),ie(!0),ue("Haetaan sarjatilannetta...");var t={standings:e};m.a.post("/api/standings",t).then((function(t){console.log(t.data),q(t.data),ne(e)})).then((function(){ie(!1),ue("")})).catch((function(e){console.log(e),be("search"),ie(!1),ue(""),Ee("Ongelma ilmeni haettaessa sarjatilannetta."),setTimeout((function(){return Ee("")}),6e3)}))},isLoading:re,loadingText:me,errorText:he}),"info"===O?l.a.createElement(b,{handleNaviChange:be,DBinfo:ge}):l.a.createElement("div",null),"list-ul"===O?re?l.a.createElement(M,{loadingText:me}):0===R.length?be("search"):l.a.createElement(A,{matches:R,handleNaviChange:be}):l.a.createElement("div",null),"standings"===O?re?l.a.createElement(M,{loadingText:me}):l.a.createElement(F,{standings:$,selectedStandings:ae,handleNaviChange:be}):l.a.createElement("div",null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(U,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[29,1,2]]]);
//# sourceMappingURL=main.aeca37c2.chunk.js.map